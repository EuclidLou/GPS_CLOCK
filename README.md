# GPS_CLOCK

## GPS授时的迷你时钟
![](/IMG/1.jpg)
## 前言
这是基地招新题目，怎么算成本都要100-200，不如做一个好看点的 <br>


## 项目结构
|目录|内容|
|---|----|
|PCB_RELEASE|PCB|
|SOFTWARE|程序|
|CAD|外壳|

## 硬件部分
![](/IMG/2.jpg)
主控依然使用ESP32-C3，GPS选用GP-02模块，数码管选了很久，找到了一家专门做贴片数码管的 <br>
译码器使用经典74HC595，担心输出功率不够，加了一级PMOS驱动 <br>
电源管理用的外置TYPE-C供电或一节18650，自动切换电源，并在外接电源时充电 <br>
按键从侧面引出四个，其中三个是可编程的，同时也是BOOT时的STRAPPER引脚(boot选择会自动锁存STRAPPER的值，因此可以复用) <br>
烧录方式通过ESP32内置的USB-JTAG桥，背面也留出了UART0的TEST POINT
![](/IMG/3.jpg)

## 软件部分
依然通过IDF编写，基于FreeRTOS建立3个线程 <br>
|Thread|Function|
|------|--------|
|TaskA |显示时间|
|TaskB |校准时间|
|TaskC |菜单管理|

校准时间通过读取GP-02的 $GNZDA 字段，截取相应时间和日期 <br> 
实测室内冷启动校准耗时30s，热启动4s <br>
菜单正在完善，目前一级菜单KEY0切换显示 时间/日期 ，KEY1、KEY2调整亮度 <br>

## 机械部分
大致设计了一个外壳，把电池座和陶瓷天线都装进去 <br>
![](/IMG/4.jpg)
